{% extends "pick.html" %}

{% load static %}
{% block link_makepicks_class %}<li class="active">{% endblock %}
{% block head %}
<script type="text/javascript" src="{{ STATIC_URL }}/js/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}/js/jquery.floatThead.js"></script>
<script type="text/javascript"> 
	$(document).ready(function() 
	    { 
                    $("#QB-table").tablesorter({sortList: [[3,1]]}); 
                    $("#RB-table").tablesorter({sortList: [[3,1]]}); 
                    $("#WR-table").tablesorter({sortList: [[3,1]]}); 
                    $("#TE-table").tablesorter({sortList: [[3,1]]}); 
		    {% if qb %}
		    	setQB({{qb.id}});
		    {% endif %}
		    {% if rb %}
				setRB({{rb.id}});
		    {% endif %}
		    {% if wr %}
				setWR({{wr.id}});
			{% endif %}
		    {% if te %}
				setTE({{te.id}});
			{% endif %}
	    } 
	);
</script>


<script type="text/javascript"> 

function setQB(row) { 
    // set desired row 
    {% for QB in QBs %}
        document.getElementById({{QB.id}}).classList.remove("info");
    {%endfor%}
    document.getElementById(row).classList.add("info");
    var formInfo = document.forms['players'];
    formInfo.QB.value = row;
    return true; 
    }

function setRB(row) { 
    // Clear all rows each time 
    {% for RB in RBs %}
        document.getElementById({{RB.id}}).classList.remove("info");
    {%endfor%}
    // set desired row 
    document.getElementById(row).classList.add("info");
    var formInfo = document.forms['players'];
    formInfo.RB.value = row;
    return true; 
    }

function setWR(row) { 
    // Clear all rows each time 
    {% for WR in WRs %}
        document.getElementById({{WR.id}}).classList.remove("info");
    {%endfor%}
    // set desired row 
    document.getElementById(row).classList.add("info");
    var formInfo = document.forms['players'];
    formInfo.WR.value = row;
    return true; 
    }
    
function setTE(row) { 
    // Clear all rows each time 
    {% for TE in TEs %}
        document.getElementById({{TE.id}}).classList.remove("info");
    {%endfor%}
    // set desired row 
    document.getElementById(row).classList.add("info");
    var formInfo = document.forms['players'];
    formInfo.TE.value = row;
    return true;     
    } 

</script>
{% endblock %}

{% block btn_text %}Week {{week}} {% endblock %}

{% block pick_content %}

<p>Make Your Picks For Week {{week}} {{season_type}}</p>

<p> 
<form name="players" action= "{% url 'threeandout:submit' week=week season_type=season_type%}" method="post">
{% csrf_token %}


{% if QBs %}
<p>Pick a QB:</p>
<div class="row">
<div class="col-sm-8">
<table id="QB-table" class="table table-striped table-bordered pick-table-scroll table-condensed sorter-bootstrap"> 
<thead>
  <tr role="row">
    <th>Player</th>
    <th>Team</th>
    <th>Opponent</th>
    <th>Score</th>
    <th>Times Picked </th>
  </tr>
 </thead>
 <tbody>
  {% for QB in QBs %}
  <tr id="{{QB.id}}">
  	<td onclick="return setQB('{{QB.id}}')">{{QB.name}} </td>
  	<td onclick="return setQB('{{QB.id}}')">{{QB.teamName}} </td>
  	<td onclick="return setQB('{{QB.id}}')">{%if QB.teamName == QB.away%} {{QB.home}} {%else%} {{QB.away}} {%endif%}</td>
  	<td onclick="return setQB('{{QB.id}}')">{{QB.scoretodate}} </td>
  	<td onclick="return setQB('{{QB.id}}')">{{QB.numPicked}} </td>
  </tr>
  {% endfor %}
</tbody>
</table>
</div>
</div>

<input type="hidden" name="QB" value="" size ="40" />
{% else %}
	QB: {{qb.name}}
{% endif %}
 <br> 
{% if RBs %}
<p>Pick a RB:</p>
<div class="row">
<div class="col-sm-8">
<table id="RB-table" class="table table-striped table-bordered pick-table-scroll sorter-bootstrap"> 
<thead>
  <tr>
    <th>Player</th>
    <th>Team</th>
    <th>Opponent</th>
    <th>Score</th>
    <th>Times Picked </th>
  </tr>
 </thead>
 <tbody>
  {% for RB in RBs %}
  <tr id="{{RB.id}}">
  	<td onclick="return setRB('{{RB.id}}')">{{RB.name}} </td>
  	<td onclick="return setRB('{{RB.id}}')">{{RB.team}} </td>
  	<td onclick="return setRB('{{RB.id}}')">{%if RB.teamName == RB.away%} {{RB.home}} {%else%} {{RB.away}} {%endif%}</td>
  	<td onclick="return setRB('{{RB.id}}')">{{RB.scoretodate}} </td>
  	<td onclick="return setRB('{{RB.id}}')">{{RB.numPicked}} </td>
  </tr>
  {% endfor %}
</tbody>
</table>
</div>
</div>
</div>

<input type="hidden" name="RB" value="" size ="40" />
{% else %}
	RB: {{rb.name}}
{% endif %}
 <br> 

{% if WRs %}
<p>Pick a WR:</p> 
<div class="row">
<div class="col-sm-8">
<table id="WR-table" class="table table-striped table-bordered pick-table-scroll table-condensed sorter-bootstrap"> 
<thead>
  <tr>
    <th>Player</th>
    <th>Team</th>
    <th>Opponent</th>
    <th>Score</th>
    <th>Times Picked </th>
  </tr>
 </thead>
 <tbody>
  {% for WR in WRs %}
  <tr id="{{WR.id}}">
  	<td onclick="return setWR('{{WR.id}}')">{{WR.name}} </td>
  	<td onclick="return setWR('{{WR.id}}')">{{WR.team}} </td>
  	<td onclick="return setWR('{{WR.id}}')">{%if WR.teamName == WR.away%} {{WR.home}} {%else%} {{WR.away}} {%endif%}</td>
  	<td onclick="return setWR('{{WR.id}}')">{{WR.scoretodate}} </td>
  	<td onclick="return setWR('{{WR.id}}')">{{WR.numPicked}} </td>
  </tr>
  {% endfor %}
</tbody>
</table>
</div>
</div>

<input type="hidden" name="WR" value="" size ="40" />
{% else %}
	WR: {{wr.name}}
{% endif %}
 <br> 

{% if TEs %}
<p>Pick a TE: </p>
<div class="row">
<div class="col-sm-8">
<table id="TE-table" class="table table-striped table-bordered pick-table-scroll table-condensed sorter-bootstrap"> 
<thead>
  <tr>
    <th>Player</th>
    <th>Team</th>
    <th>Opponent</th>
    <th>Score</th>
    <th>Times Picked </th>
  </tr>
 </thead>
 <tbody>
  {% for TE in TEs %}
  <tr id="{{TE.id}}">
  	<td onclick="return setTE('{{TE.id}}')">{{TE.name}} </td>
  	<td onclick="return setTE('{{TE.id}}')">{{TE.team}} </td>
  	<td onclick="return setTE('{{TE.id}}')">{%if TE.teamName == TE.away%} {{TE.home}} {%else%} {{TE.away}} {%endif%}</td>
  	<td onclick="return setTE('{{TE.id}}')">{{TE.scoretodate}} </td>
  	<td onclick="return setTE('{{TE.id}}')">{{TE.numPicked}} </td>
  </tr>
  {% endfor %}
</tbody>
</table>
</div>
</div>

<input type="hidden" name="TE" value="" size ="40" />
{% else %}
	TE: {{te.name}}
{% endif %}
 <br> 
 <button type="submit" class="btn btn-primary">Submit</button>
</form>
{% endblock %}
